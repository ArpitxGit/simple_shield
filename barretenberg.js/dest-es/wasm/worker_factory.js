import 'threads/register';
import { spawn, Thread } from 'threads';
import createDebug from 'debug';
export async function createWorker(id, module, initial) {
    const debug = createDebug(`bb:wasm${id ? ':' + id : ''}`);
    const thread = await spawn(new Worker('./worker.js'));
    thread.logs().subscribe(debug);
    await thread.init(module, initial);
    return thread;
}
export async function destroyWorker(worker) {
    await Thread.terminate(worker);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyX2ZhY3RvcnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvd2FzbS93b3JrZXJfZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGtCQUFrQixDQUFDO0FBRTFCLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ3hDLE9BQU8sV0FBVyxNQUFNLE9BQU8sQ0FBQztBQUVoQyxNQUFNLENBQUMsS0FBSyxVQUFVLFlBQVksQ0FBQyxFQUFXLEVBQUUsTUFBMkIsRUFBRSxPQUFnQjtJQUMzRixNQUFNLEtBQUssR0FBRyxXQUFXLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDMUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxLQUFLLENBQXFCLElBQUksTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7SUFDMUUsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixNQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ25DLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxVQUFVLGFBQWEsQ0FBQyxNQUEwQjtJQUM1RCxNQUFNLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBYSxDQUFDLENBQUM7QUFDeEMsQ0FBQyJ9